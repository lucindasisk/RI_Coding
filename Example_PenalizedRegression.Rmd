---
title: "Example_PenalizedRegression"
author: "Lucinda Sisk"
date: "9/19/2019"
output: html_document
---

###Elastic Net

$\\$

Elastic Net produces a regression model that is penalized with both the L1-norm and L2-norm. The consequence of this is to effectively shrink coefficients (like in ridge regression) and to set some coefficients to zero (as in LASSO).

(STHDA Resource)[ http://www.sthda.com/english/articles/37-model-selection-essentials-in-r/153-penalized-regression-essentials-ridge-lasso-elastic-net/#elastic-net]

```{r setup, include=FALSE}
library(tidyverse)
library(caret)
library(glmnet)

#Subset example data into predictor and outcome variables

example_data <- read_csv('/Users/lucindasisk/Box/LS_Folders/CANDLab_LS/TraumaData/CTQ_ROI_SCR_SOBP2019_data_set_04.28.19_FINAL.csv')

outcome_vars <- example_data %>%
    select(Shapes2_Aminus, subj_id)

predictor_vars <- example_data %>%
    select(subj_id, Sex_Final, Age_Final,
           Hindy_L_AntHipp_test1_ABminus_predot:Hindy_L_AntHipp_test1_AllShapes_dot)

#Elastic Net Regression

# Build the model
set.seed(123)
elastic <- train(
  example_data, data = train.data, method = "glmnet",
  trControl = trainControl("cv", number = 10),
  tuneLength = 10
  )
# Model coefficients
coef(elastic$finalModel, elastic$bestTune$lambda)
# Make predictions
predictions <- elastic %>% predict(test.data)
# Model prediction performance
data.frame(
  RMSE = RMSE(predictions, test.data$medv),
  Rsquare = R2(predictions, test.data$medv)
)

```

#### Questions

1. How do we match predictors to outcome variables? I.e. is there a place to specify that subject ID links the two samples or does it figure this out automatically?

2. Do we need to pull samples from the same dataframe, two different data frames, or does it not matter?





